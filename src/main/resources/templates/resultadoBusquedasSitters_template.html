<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link type="text/css" rel="stylesheet" href="css/l4sstyleprueba.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- <script src="/webjars/jquery/jquery.min.js"></script> -->
<!-- <script src="/funciones.js"></script> -->
<title>Resultado de búsqueda de sitters</title>
</head>
<body>
<img src="images/logolooking.jpg" alt="Logo Aplicación" style="width:780px;height:150px;">
{{#provincias_vacias}}
<h2>Provincia vacía</h2>
	<input type="submit" value="Volver al perfil" onclick="window.location='../perfil-usuario';" />
{{/provincias_vacias}}

{{#vacio}}
<h2>No se han encontrado resultados</h2>
	<input type="submit" value="Intentar de nuevo" onclick="window.location='../perfil-usuario';" />
{{/vacio}}

{{#encontrado}}
<h2>Resultados para la búsqueda de Sitters</h2>
	<table>
		{{#resultadologins}}
		<tr>
		<td>Sitter {{.}}</td>
		</tr>
		{{/resultadologins}}
	</table>
	<table>
		{{#resultadotarifas}}
		<tr>
		<td>{{.}},00 €/hora</td>
		</tr>
		{{/resultadotarifas}}
	</table>
	<table>
		{{#resultadoprovincias}}
		<tr>
		<td>{{.}}</td>
		</tr>
		{{/resultadoprovincias}}
	</table>
	<table>
		{{#resultadoids}}
		<tr>
<!-- 		<td><input type="submit" value="Ir al Perfil del Sitter" onclick="window.location='../sitters/{{.}}';" /> </td> -->
			<td><input type="submit" value="Ir al Perfil del Sitter" onclick="cargarSitter('{{.}}');" /> </td>

		</tr>
		{{/resultadoids}}
	</table>
<!-- 	<td><input type="submit" value="Botón del sitter" onclick="window.location='../sitters/{{.}}';" /> </td> -->
	<div>
	<input type="submit" value="Volver al perfil" onclick="window.location='../perfil-usuario';" />
	</div>
{{/encontrado}}
<br/>
<br/>
<div class="resultadoRest" id="divDetalleSitter"></div>

</body>
<script>
function cargarSitter(id) {
	// Se lanza una petición ajax a la irl del restcontroller usando jquery
    $.ajax({url: "/sitters/"+id, success: function(result){
    	console.log(result);
		var html="";
		if (result!=""){
// 			    	var obj = jQuery.parseJSON(result);
					var obj = result;
					html+="<h3>Mi nombre</h3>";
					html+="<p>"+obj.nombre+" "+obj.apellido +"</p>";
					html+="<h3>¿Quién soy?</h3>";
					html+="<p>"+obj.descripcion+"</p>";
					html+="<h3>Provincia</h3>";
					html+="<p>"+obj.provincia+"</p>";
					html+="<h3>Mi tarifa es:</h3>";
					html+="<p>"+obj.tarifa+",00€/hora</p>";   
		}else{
						html+="<h3>No se han encontrado resultados</h3>";
		}		
		$("#divDetalleSitter").html(html);
    },
    error: function(xhr, ajaxOptions, thrownError) {
        alert(thrownError);
    }});
 
}
</script>
</html>